{"ast":null,"code":"import axios from \"axios\";\nconst axiosInstance = axios.create({\n  baseURL: \"http://localhost:3000\"\n});\nexport async function fetchOrders(setOrders) {\n  try {\n    const result = await axiosInstance.get('/orders', {\n      withCredentials: true\n    });\n    setOrders(result.data.orders);\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function loggedStatus(loggedIn, setLoggedIn, setUser) {\n  try {\n    const loggStatus = await axiosInstance.get('/logged_in', {\n      withCredentials: true\n    });\n\n    if (loggStatus.data.logged_in && loggedIn === false) {\n      setLoggedIn(true);\n      console.log('use effect trigger');\n      setUser(loggStatus.data.user);\n      return loggStatus.data;\n    } else if (!loggStatus.data.logged_in && loggedIn === true) {\n      setLoggedIn(false);\n      setUser({});\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function productShops(shops, triggered, setTriggered, setShops) {\n  try {\n    const result = await axiosInstance.get('/shops');\n\n    if (result.data.products !== shops && triggered === false) {\n      setShops(result.data.products);\n      setTriggered(true);\n      return result.data;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function creatProduct(product) {\n  try {\n    const result = await axiosInstance.post('/products', product, {\n      withCredentials: true\n    });\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function deleteProduct(id) {\n  try {\n    const result = await axiosInstance.delete(`/products/${id}`, {\n      withCredentials: true\n    });\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function fetchIndexProducts(products, triggered, setProducts, setTriggered) {\n  try {\n    const result = await axiosInstance.get('/products', {\n      withCredentials: true\n    });\n\n    if (result.data.products !== products && triggered === false) {\n      setProducts(result.data.products);\n      setTriggered(true);\n      return result.data;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function editOrderitem(quantity, id, setTriggered) {\n  try {\n    const result = axiosInstance.patch(`/order_items/${id}`, {\n      order_item: {\n        quantity: quantity\n      }\n    }, {\n      withCredentials: true\n    });\n    setTriggered(false);\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function fetchCart(cart, triggered, setTriggered, setCart, setMessage) {\n  try {\n    const result = await axiosInstance.get('/cart', {\n      withCredentials: true\n    });\n\n    if (result.data !== cart && triggered === false) {\n      setCart(result.data);\n      setTriggered(true);\n      return result.data;\n    } else if (result.data.connected === false) {\n      setMessage(result.data.message);\n      return result.data;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function chekcout(data, user) {\n  try {\n    const result = await axiosInstance.post('/orders', {\n      order: {\n        total: data,\n        user_id: user.id\n      }\n    }, {\n      withCredentials: true\n    });\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n}","map":{"version":3,"names":["axios","axiosInstance","create","baseURL","fetchOrders","setOrders","result","get","withCredentials","data","orders","error","console","log","loggedStatus","loggedIn","setLoggedIn","setUser","loggStatus","logged_in","user","productShops","shops","triggered","setTriggered","setShops","products","creatProduct","product","post","deleteProduct","id","delete","fetchIndexProducts","setProducts","editOrderitem","quantity","patch","order_item","fetchCart","cart","setCart","setMessage","connected","message","chekcout","order","total","user_id"],"sources":["/home/dorken/development/shopping-app/shopping-front/src/requests/ApiRequest.js"],"sourcesContent":["import axios from \"axios\";\n\nconst axiosInstance = axios.create({baseURL: \"http://localhost:3000\"})\n\nexport async function fetchOrders(setOrders){\n    try{\n        const result = await axiosInstance.get('/orders', {withCredentials: true})\n        setOrders(result.data.orders)\n        return result.data\n    }catch(error){\n        console.log(error)\n    }\n}\n\nexport async function loggedStatus(loggedIn, setLoggedIn, setUser){\n    try{\n        const loggStatus = await axiosInstance.get('/logged_in', {withCredentials: true})\n        if(loggStatus.data.logged_in && loggedIn === false){\n            setLoggedIn(true)\n            console.log('use effect trigger')\n            setUser(loggStatus.data.user)\n            return loggStatus.data\n        }else if(!loggStatus.data.logged_in && loggedIn === true){\n            setLoggedIn(false)\n            setUser({})\n        }\n    }catch(error){\n            console.log(error)\n    }\n}\n\nexport async function productShops(shops, triggered, setTriggered, setShops){\n    try{\n        const result = await axiosInstance.get('/shops')\n        if(result.data.products !== shops && triggered === false ){\n            setShops(result.data.products)\n            setTriggered(true)\n            return result.data\n        }\n    }catch(error){\n        console.log(error)\n    }\n}\n\nexport async function creatProduct(product){\n    try{\n        const result = await axiosInstance.post('/products', product, {withCredentials:true})\n        return result.data\n    }catch(error){\n        console.log(error)\n    }\n}\n\n\nexport async function deleteProduct(id){\n    try{\n        const result = await axiosInstance.delete(`/products/${id}`, {withCredentials: true})\n        return result.data\n    }catch(error){\n        console.log(error)\n    }\n}\n\nexport async function fetchIndexProducts(products, triggered, setProducts, setTriggered){\n    try{\n        const result = await axiosInstance.get('/products', {withCredentials: true})\n            if(result.data.products !== products && triggered === false){\n                setProducts(result.data.products)\n                setTriggered(true)\n                return result.data\n            }\n    }catch(error){\n        console.log(error)\n    }\n}\n\nexport async function editOrderitem(quantity, id, setTriggered){\n    try{\n        const result = axiosInstance.patch(`/order_items/${id}`, {\n            order_item: {\n                        quantity: quantity,\n          }}, {withCredentials:true})\n        setTriggered(false)\n        return result.data\n    }catch(error){\n        console.log(error)\n    }\n}\n\n\nexport async function fetchCart(cart, triggered, setTriggered, setCart, setMessage){\n    try{\n        const result = await axiosInstance.get('/cart', {withCredentials: true})\n        if(result.data !== cart && triggered === false){\n            setCart(result.data)\n            setTriggered(true)\n            return result.data\n        }else if(result.data.connected === false){\n            setMessage(result.data.message)\n            return result.data\n        }\n    }catch(error){\n        console.log(error)\n    }\n}\n\nexport async function chekcout(data, user){\n    try{\n        const result = await axiosInstance.post('/orders', {\n            order: {\n            total: data,\n            user_id: user.id\n          }}, {withCredentials: true})\n          return result.data\n    }catch(error){\n        console.log(error)\n    }\n}\n\n\n\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,aAAa,GAAGD,KAAK,CAACE,MAAN,CAAa;EAACC,OAAO,EAAE;AAAV,CAAb,CAAtB;AAEA,OAAO,eAAeC,WAAf,CAA2BC,SAA3B,EAAqC;EACxC,IAAG;IACC,MAAMC,MAAM,GAAG,MAAML,aAAa,CAACM,GAAd,CAAkB,SAAlB,EAA6B;MAACC,eAAe,EAAE;IAAlB,CAA7B,CAArB;IACAH,SAAS,CAACC,MAAM,CAACG,IAAP,CAAYC,MAAb,CAAT;IACA,OAAOJ,MAAM,CAACG,IAAd;EACH,CAJD,CAIC,OAAME,KAAN,EAAY;IACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACH;AACJ;AAED,OAAO,eAAeG,YAAf,CAA4BC,QAA5B,EAAsCC,WAAtC,EAAmDC,OAAnD,EAA2D;EAC9D,IAAG;IACC,MAAMC,UAAU,GAAG,MAAMjB,aAAa,CAACM,GAAd,CAAkB,YAAlB,EAAgC;MAACC,eAAe,EAAE;IAAlB,CAAhC,CAAzB;;IACA,IAAGU,UAAU,CAACT,IAAX,CAAgBU,SAAhB,IAA6BJ,QAAQ,KAAK,KAA7C,EAAmD;MAC/CC,WAAW,CAAC,IAAD,CAAX;MACAJ,OAAO,CAACC,GAAR,CAAY,oBAAZ;MACAI,OAAO,CAACC,UAAU,CAACT,IAAX,CAAgBW,IAAjB,CAAP;MACA,OAAOF,UAAU,CAACT,IAAlB;IACH,CALD,MAKM,IAAG,CAACS,UAAU,CAACT,IAAX,CAAgBU,SAAjB,IAA8BJ,QAAQ,KAAK,IAA9C,EAAmD;MACrDC,WAAW,CAAC,KAAD,CAAX;MACAC,OAAO,CAAC,EAAD,CAAP;IACH;EACJ,CAXD,CAWC,OAAMN,KAAN,EAAY;IACLC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACP;AACJ;AAED,OAAO,eAAeU,YAAf,CAA4BC,KAA5B,EAAmCC,SAAnC,EAA8CC,YAA9C,EAA4DC,QAA5D,EAAqE;EACxE,IAAG;IACC,MAAMnB,MAAM,GAAG,MAAML,aAAa,CAACM,GAAd,CAAkB,QAAlB,CAArB;;IACA,IAAGD,MAAM,CAACG,IAAP,CAAYiB,QAAZ,KAAyBJ,KAAzB,IAAkCC,SAAS,KAAK,KAAnD,EAA0D;MACtDE,QAAQ,CAACnB,MAAM,CAACG,IAAP,CAAYiB,QAAb,CAAR;MACAF,YAAY,CAAC,IAAD,CAAZ;MACA,OAAOlB,MAAM,CAACG,IAAd;IACH;EACJ,CAPD,CAOC,OAAME,KAAN,EAAY;IACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACH;AACJ;AAED,OAAO,eAAegB,YAAf,CAA4BC,OAA5B,EAAoC;EACvC,IAAG;IACC,MAAMtB,MAAM,GAAG,MAAML,aAAa,CAAC4B,IAAd,CAAmB,WAAnB,EAAgCD,OAAhC,EAAyC;MAACpB,eAAe,EAAC;IAAjB,CAAzC,CAArB;IACA,OAAOF,MAAM,CAACG,IAAd;EACH,CAHD,CAGC,OAAME,KAAN,EAAY;IACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACH;AACJ;AAGD,OAAO,eAAemB,aAAf,CAA6BC,EAA7B,EAAgC;EACnC,IAAG;IACC,MAAMzB,MAAM,GAAG,MAAML,aAAa,CAAC+B,MAAd,CAAsB,aAAYD,EAAG,EAArC,EAAwC;MAACvB,eAAe,EAAE;IAAlB,CAAxC,CAArB;IACA,OAAOF,MAAM,CAACG,IAAd;EACH,CAHD,CAGC,OAAME,KAAN,EAAY;IACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACH;AACJ;AAED,OAAO,eAAesB,kBAAf,CAAkCP,QAAlC,EAA4CH,SAA5C,EAAuDW,WAAvD,EAAoEV,YAApE,EAAiF;EACpF,IAAG;IACC,MAAMlB,MAAM,GAAG,MAAML,aAAa,CAACM,GAAd,CAAkB,WAAlB,EAA+B;MAACC,eAAe,EAAE;IAAlB,CAA/B,CAArB;;IACI,IAAGF,MAAM,CAACG,IAAP,CAAYiB,QAAZ,KAAyBA,QAAzB,IAAqCH,SAAS,KAAK,KAAtD,EAA4D;MACxDW,WAAW,CAAC5B,MAAM,CAACG,IAAP,CAAYiB,QAAb,CAAX;MACAF,YAAY,CAAC,IAAD,CAAZ;MACA,OAAOlB,MAAM,CAACG,IAAd;IACH;EACR,CAPD,CAOC,OAAME,KAAN,EAAY;IACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACH;AACJ;AAED,OAAO,eAAewB,aAAf,CAA6BC,QAA7B,EAAuCL,EAAvC,EAA2CP,YAA3C,EAAwD;EAC3D,IAAG;IACC,MAAMlB,MAAM,GAAGL,aAAa,CAACoC,KAAd,CAAqB,gBAAeN,EAAG,EAAvC,EAA0C;MACrDO,UAAU,EAAE;QACAF,QAAQ,EAAEA;MADV;IADyC,CAA1C,EAGT;MAAC5B,eAAe,EAAC;IAAjB,CAHS,CAAf;IAIAgB,YAAY,CAAC,KAAD,CAAZ;IACA,OAAOlB,MAAM,CAACG,IAAd;EACH,CAPD,CAOC,OAAME,KAAN,EAAY;IACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACH;AACJ;AAGD,OAAO,eAAe4B,SAAf,CAAyBC,IAAzB,EAA+BjB,SAA/B,EAA0CC,YAA1C,EAAwDiB,OAAxD,EAAiEC,UAAjE,EAA4E;EAC/E,IAAG;IACC,MAAMpC,MAAM,GAAG,MAAML,aAAa,CAACM,GAAd,CAAkB,OAAlB,EAA2B;MAACC,eAAe,EAAE;IAAlB,CAA3B,CAArB;;IACA,IAAGF,MAAM,CAACG,IAAP,KAAgB+B,IAAhB,IAAwBjB,SAAS,KAAK,KAAzC,EAA+C;MAC3CkB,OAAO,CAACnC,MAAM,CAACG,IAAR,CAAP;MACAe,YAAY,CAAC,IAAD,CAAZ;MACA,OAAOlB,MAAM,CAACG,IAAd;IACH,CAJD,MAIM,IAAGH,MAAM,CAACG,IAAP,CAAYkC,SAAZ,KAA0B,KAA7B,EAAmC;MACrCD,UAAU,CAACpC,MAAM,CAACG,IAAP,CAAYmC,OAAb,CAAV;MACA,OAAOtC,MAAM,CAACG,IAAd;IACH;EACJ,CAVD,CAUC,OAAME,KAAN,EAAY;IACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACH;AACJ;AAED,OAAO,eAAekC,QAAf,CAAwBpC,IAAxB,EAA8BW,IAA9B,EAAmC;EACtC,IAAG;IACC,MAAMd,MAAM,GAAG,MAAML,aAAa,CAAC4B,IAAd,CAAmB,SAAnB,EAA8B;MAC/CiB,KAAK,EAAE;QACPC,KAAK,EAAEtC,IADA;QAEPuC,OAAO,EAAE5B,IAAI,CAACW;MAFP;IADwC,CAA9B,EAIf;MAACvB,eAAe,EAAE;IAAlB,CAJe,CAArB;IAKE,OAAOF,MAAM,CAACG,IAAd;EACL,CAPD,CAOC,OAAME,KAAN,EAAY;IACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACH;AACJ"},"metadata":{},"sourceType":"module"}