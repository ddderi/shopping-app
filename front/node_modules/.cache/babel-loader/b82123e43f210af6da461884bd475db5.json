{"ast":null,"code":"import axios from \"axios\";\nconst axiosInstance = axios.create({\n  baseURL: \"http://localhost:3000\"\n});\nexport async function fetchOrders(setOrders) {\n  try {\n    const result = await axiosInstance.get('/orders', {\n      withCredentials: true\n    });\n    setOrders(result.data.orders);\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function loggedStatus(loggedIn, setLoggedIn, setUser) {\n  try {\n    const loggStatus = await axiosInstance.get('/logged_in', {\n      withCredentials: true\n    });\n\n    if (loggStatus.data.logged_in && loggedIn === false) {\n      setLoggedIn(true);\n      console.log('use effect trigger');\n      setUser(loggStatus.data.user);\n      return loggStatus.data;\n    } else if (!loggStatus.data.logged_in && loggedIn === true) {\n      setLoggedIn(false);\n      setUser({});\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function productShops(shops, triggered, setTriggered, setShops) {\n  try {\n    const result = await axiosInstance.get('/shops');\n\n    if (result.data.products !== shops && triggered === false) {\n      setShops(result.data.products);\n      setTriggered(true);\n      return result.data;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function creatProduct(product) {\n  try {\n    const result = await axiosInstance.post('/products', product, {\n      withCredentials: true\n    });\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function deleteProduct(id) {\n  try {\n    const result = await axiosInstance.delete(`/products/${id}`, {\n      withCredentials: true\n    });\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function fetchIndexProducts(products, triggered, setProducts, setTriggered) {\n  try {\n    const result = await axiosInstance.get('/products', {\n      withCredentials: true\n    });\n\n    if (result.data.products !== products && triggered === false) {\n      setProducts(result.data.products);\n      setTriggered(true);\n      return result.data;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function editOrderitem(quantity, id) {\n  try {\n    const result = axiosInstance.patch(`/order_items/${id}`, {\n      order_item: {\n        quantity: quantity\n      }\n    }, {\n      withCredentials: true\n    });\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function fetchCart(cart, triggered, setTriggered, setCart, setMessage) {\n  try {\n    const result = await axiosInstance.get(`/cart`, {\n      withCredentials: true\n    });\n\n    if (result.data !== cart && triggered === false) {\n      setCart(result.data);\n      setTriggered(true);\n      return result.data;\n    } else if (result.data.connected === false) {\n      setMessage(result.data.message);\n      return result.data;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function checkout(total, user, resetCart) {\n  try {\n    const result = await axiosInstance.post('/orders', {\n      order: {\n        total: total,\n        user_id: user.id\n      }\n    }, {\n      withCredentials: true\n    });\n    resetCart();\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function addProductToCart(data, setMessage) {\n  try {\n    const result = await axiosInstance.post('/order_items', data, {\n      withCredentials: true\n    });\n    setMessage(result.data.message);\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function removeProdFromCart(id) {\n  try {\n    const result = await axiosInstance.delete(`/order_items/${id}`, {\n      withCredentials: true\n    });\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n}","map":{"version":3,"names":["axios","axiosInstance","create","baseURL","fetchOrders","setOrders","result","get","withCredentials","data","orders","error","console","log","loggedStatus","loggedIn","setLoggedIn","setUser","loggStatus","logged_in","user","productShops","shops","triggered","setTriggered","setShops","products","creatProduct","product","post","deleteProduct","id","delete","fetchIndexProducts","setProducts","editOrderitem","quantity","patch","order_item","fetchCart","cart","setCart","setMessage","connected","message","checkout","total","resetCart","order","user_id","addProductToCart","removeProdFromCart"],"sources":["/home/dorken/development/shopping-app/shopping-front/src/requests/ApiRequest.js"],"sourcesContent":["import axios from \"axios\";\n\nconst axiosInstance = axios.create({ baseURL: \"http://localhost:3000\" })\n\nexport async function fetchOrders(setOrders) {\n    try {\n        const result = await axiosInstance.get('/orders', { withCredentials: true })\n        setOrders(result.data.orders)\n        return result.data\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nexport async function loggedStatus(loggedIn, setLoggedIn, setUser) {\n    try {\n        const loggStatus = await axiosInstance.get('/logged_in', { withCredentials: true })\n        if (loggStatus.data.logged_in && loggedIn === false) {\n            setLoggedIn(true)\n            console.log('use effect trigger')\n            setUser(loggStatus.data.user)\n            return loggStatus.data\n        } else if (!loggStatus.data.logged_in && loggedIn === true) {\n            setLoggedIn(false)\n            setUser({})\n        }\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nexport async function productShops(shops, triggered, setTriggered, setShops) {\n    try {\n        const result = await axiosInstance.get('/shops')\n        if (result.data.products !== shops && triggered === false) {\n            setShops(result.data.products)\n            setTriggered(true)\n            return result.data\n        }\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nexport async function creatProduct(product) {\n    try {\n        const result = await axiosInstance.post('/products', product, { withCredentials: true })\n        return result.data\n    } catch (error) {\n        console.log(error)\n    }\n}\n\n\nexport async function deleteProduct(id) {\n    try {\n        const result = await axiosInstance.delete(`/products/${id}`, { withCredentials: true })\n        return result.data\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nexport async function fetchIndexProducts(products, triggered, setProducts, setTriggered) {\n    try {\n        const result = await axiosInstance.get('/products', { withCredentials: true })\n        if (result.data.products !== products && triggered === false) {\n            setProducts(result.data.products)\n            setTriggered(true)\n            return result.data\n        }\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nexport async function editOrderitem(quantity, id) {\n    try {\n        const result = axiosInstance.patch(`/order_items/${id}`, {\n            order_item: {\n                quantity: quantity,\n            }\n        }, { withCredentials: true })\n        return result.data\n    } catch (error) {\n        console.log(error)\n    }\n}\n\n\nexport async function fetchCart(cart, triggered, setTriggered, setCart, setMessage) {\n    try {\n        const result = await axiosInstance.get(`/cart`, { withCredentials: true })\n        if (result.data !== cart && triggered === false) {\n            setCart(result.data)\n            setTriggered(true)\n            return result.data\n        } else if (result.data.connected === false) {\n            setMessage(result.data.message)\n            return result.data\n        }\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nexport async function checkout(total, user, resetCart) {\n    try {\n        const result = await axiosInstance.post('/orders', {\n            order: {\n                total: total,\n                user_id: user.id\n            }\n        }, { withCredentials: true })\n        resetCart()\n        return result.data\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nexport async function addProductToCart(data, setMessage) {\n    try {\n        const result = await axiosInstance.post('/order_items', data, { withCredentials: true })\n        setMessage(result.data.message)\n        return result.data\n    } catch (error) {\n        console.log(error)\n    }\n}\n\n\nexport async function removeProdFromCart(id) {\n    try {\n        const result = await axiosInstance.delete(`/order_items/${id}`, { withCredentials: true })\n        return result.data\n    } catch (error) {\n        console.log(error)\n    }\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}